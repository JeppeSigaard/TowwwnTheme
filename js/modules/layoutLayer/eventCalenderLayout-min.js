var EventCalenderModule={settings:{html:"",breakpointHtml:"",breakpoint:-1,breakpointArray:[],breakpointFrom:-1,breakpointTo:-1,breakpointView:""},init:function(){this.bindUIActions()},bindUIActions:function(){$(window).on("resize",function(){var t=-1,e=0,i=!0;$(".event").each(function(n,s){if(t===-1)t=s.offsetTop,e++;else{if(t!==s.offsetTop)return void(i=!1);e++}});var n=$(".eventscontainer").children(),s=n.length%e;if(n.css("max-width","none").removeClass("last-row"),i===!1)for(var r=0;r<s;r++)$("#"+n[n.length-(r+1)].attributes.id.value).css("max-width",$("#"+n[0].attributes.id.value).outerWidth()+"px").addClass("last-row");else $(".eventscontainer").hasClass("lineLayout")||n.css("max-width","195px").addClass("last-row")})},renderEventCalender:function(t,e){this.settings.breakpointView=t;var i=!1,n=25,s=-1,r=-1,a=!1,o=!0;if("undefined"!=typeof e.acceptOld&&(i=e.acceptOld),"undefined"!=typeof e.getNum&&(n=e.getNum),"undefined"!=typeof e.from&&(s=e.from),"undefined"!=typeof e.to&&(r=e.to),"undefined"!=typeof e.content&&(a=e.content,o=!1),a)this.settings.breakpointArray=e.content,this.settings.breakpoint=n,a=a.slice(0,n);else{var a=[],l=EventContentModule.settings.events,g;for(g=0;g<l.length;g++){if(a.length>n){this.settings.breakpoint=g;break}var d=new Date(l[g].start_time.substr(0,16)).getTime();!i&&d<(new Date).getTime()||s!==-1&&s>d||r!==-1&&r<d||a.push(l[g])}this.settings.breakpointArray=l}this.settings.breakpointFrom=s,this.settings.breakpointTo=r;for(var g=0;g<a.length;g++)this.settings.html+=this.generateEventHtml(a[g]);this.settings.breakpointHtml=this.settings.html,$(t).html(this.settings.html),this.settings.html=""},loadMore:function(t){for(var e=[],i=this.settings.breakpointArray,n=this.settings.breakpoint;n<i.length;n++){var s=new Date(i[n].start_time.substr(0,16)).getTime();if(e.length>=t){this.settings.breakpoint=n;break}this.settings.breakpointFrom!==-1&&this.settings.breakpointFrom>s||this.settings.breakpointTo!==-1&&this.settings.breakpointTo<s||e.push(i[n])}if(e.length<t&&(this.settings.breakpoint=i.length),0===e.length)return-1;this.settings.breakpointHtml="";for(var n=0;n<e.length;n++)this.settings.breakpointHtml+=this.generateEventHtml(e[n]);return $(this.settings.breakpointView).append(this.settings.breakpointHtml),setTimeout(function(){$(window).trigger("resize")},150),i.length-this.settings.breakpoint},generateEventHtml:function(t){var e="",i=HelpFunctions.formatDate(t.start_time,!1,!1),n=String(t.name).substr(0,36)+String(t.name).substr(36,99).split(" ")[0];n.length!==String(t.name).length&&(n+=" ...");for(var s=n.split(" "),r=0;r<s.length;r++)s[r].length>14&&(s[r]=s[r].substr(0,14)+"-<br />"+s[r].substr(12,999999999));n=s.join(" ");var e='<div class="event" id="'+t.id+'">';return e+=null!==t.images[130]&&"undefined"!=typeof t.images[130]?'<div class="imgcontainer" data-image-src="'+t.images[130]+'" ></div>':""!==t.imgurl&&null!==t.imgurl&&"undefined"!=typeof t.imgurl?'<div class="imgcontainer" data-image-src="'+t.imgurl+'" ></div>':'<div class="imgcontainer imgloaded" style="background-image:url(http://www-mtl.mit.edu/wpmu/marc2016/files/2015/08/placeholder-camera-green.png)" ></div>',e+='<div class="eventtext">',e+='<div class="title">'+n+"</div>",e+='<div class="start_time">'+i+"</div>",e+='<div class="eventlocation-container">',e+='<div class="eventblackbar"></div>',e+='<div class="eventlocation">'+t.parentname+"</div></div></div></div>"}};